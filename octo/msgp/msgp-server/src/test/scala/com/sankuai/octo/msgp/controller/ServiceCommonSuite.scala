package com.sankuai.octo.msgp.controller

import com.fasterxml.jackson.databind.ObjectMapper
import com.sankuai.msgp.common.model.Env
import com.sankuai.msgp.common.service.org.UserService
import com.sankuai.msgp.common.utils.HttpUtil
import com.sankuai.octo.msgp.serivce.service.{AppkeyProviderService, ServiceCommon}
import com.sankuai.msgp.common.model.ServiceModels.{ProviderEdit, ProviderNode, usernameIPs}
import com.sankuai.msgp.common.model.Path
import com.sankuai.octo.msgp.utils.client.ZkClient
import org.scalatest.{BeforeAndAfter, FunSuite}
import play.api.libs.json.Json

import scala.util.parsing.json.JSONObject

class ServiceCommonSuite extends FunSuite with BeforeAndAfter {
  val sankuaiPath = Path.sankuaiPath
  val prodPath = List(sankuaiPath, Env.prod).mkString("/")
  val stagePath = List(sankuaiPath, Env.stage).mkString("/")
  val testPath = List(sankuaiPath, Env.test).mkString("/")
  test("delete provider node") {
    //    val json ="{\"appkey\":\"com.sankuai.inf.sg_agent\",\"ip\":\"10.4.254.57\",\"port\":5266,\"name\":\"10.4.254.57\",\"env\":1,\"extend\":\"\"}";

    val evns = List("test", "prod", "stage")

    val ip_map = Map(
      "test" -> "10.66.40.92,127.0.0.3,10.5.245.151,10.5.240.21,10.5.245.128,10.66.42.114,10.5.242.20,10.5.245.145",
      "prod" -> "10.4.241.129,10.5.235.148,10.124.5.114,10.124.1.34,10.124.4.105,10.4.237.3,10.4.235.232,10.4.240.206,10.5.245.78,10.2.9.43,10.2.31.12,10.2.28.172,10.124.1.181,10.2.31.46,10.124.3.127,10.124.2.153,10.124.1.63,10.124.5.49,10.124.1.44,10.4.246.91,10.4.236.16,10.2.31.45,10.4.240.15,10.4.245.83,10.2.31.67,10.4.240.81,10.2.31.53,10.2.10.23,10.124.4.241,10.4.238.77,10.124.5.206,10.124.6.99,10.4.236.209,10.124.6.64,10.124.5.226,10.124.2.121,10.124.1.27,10.0.233.1,10.5.233.124,10.124.6.19,10.124.3.221,10.124.4.56,10.124.5.97,10.2.30.212,10.2.27.199,10.4.233.131,10.69.81.247,10.124.4.45,10.124.3.168,10.4.242.58,10.4.231.139,10.124.1.77,10.4.237.193,10.4.229.102,10.124.6.21,10.4.229.48,10.5.236.109,10.124.2.200,10.5.232.101,10.124.4.177,10.124.2.145,10.2.12.166,10.124.1.107,10.4.244.216,10.4.240.152,10.124.2.93,10.124.3.83,10.4.233.115,10.124.2.248,10.4.245.201,10.124.2.105,10.4.241.91,10.124.4.92,10.4.238.130,10.5.233.130,10.4.242.37,10.2.31.44,10.124.6.246,10.2.28.185,10.124.4.191,10.4.243.209,10.4.244.141,10.5.235.85,10.124.2.37,10.124.3.51,10.69.81.218,10.124.1.238,10.124.5.23,10.124.1.8,10.124.3.150,10.124.3.43,10.124.1.123,10.4.238.79,10.124.3.194,10.124.5.86,10.124.2.106,10.124.2.249,10.124.4.224,10.5.234.121,10.124.3.173,10.124.1.232,10.124.1.92,10.124.6.41,10.124.6.191,10.124.1.151,10.124.1.81,10.124.6.165,10.124.3.233,10.4.245.90,10.2.31.66,10.124.4.25,10.124.1.132,10.5.236.29,10.124.2.144,10.124.5.147,10.124.6.158,10.124.1.113,10.124.4.73,10.124.3.153,10.124.2.230,10.2.31.84,10.124.3.184,10.4.243.238,10.124.5.165,10.4.235.108,10.2.9.47,10.124.1.177,10.124.2.239,10.4.231.198,10.124.3.99,10.124.5.163,10.2.31.33,10.124.3.222,10.124.4.16,10.124.3.202,10.4.246.208,10.5.232.93,10.5.235.171,10.124.5.108,10.4.244.177,10.4.246.54,10.4.240.106,10.4.239.118,10.124.2.168,10.124.6.196,10.5.232.198,10.124.4.221,10.124.4.183,10.4.237.111,10.124.4.12,10.124.6.229,10.124.5.167,10.2.31.21,10.4.237.9,10.124.4.58,10.124.6.100,10.124.5.254,10.2.31.76,10.124.2.152,10.124.1.22,10.124.4.82,10.124.5.207,10.124.1.24,10.4.235.226,10.124.2.56,10.124.2.250,10.124.1.21,10.5.234.208,10.2.31.55,10.124.1.9,10.4.233.119,10.2.31.69,10.124.5.112,10.124.4.180,10.124.4.201,10.124.6.15,10.124.2.26,10.124.6.173,10.124.2.172,10.124.4.101,10.124.1.192,10.124.2.16,10.4.234.89,10.124.1.6,10.124.3.249,10.124.6.224,10.124.3.228,10.124.5.133,10.124.5.58,10.4.237.122,10.4.239.123,10.2.30.166,10.124.3.143,10.2.31.47,10.124.4.80,10.124.6.71,10.4.235.111,172.26.26.192,10.124.4.182,10.124.6.186,10.2.29.105,10.124.3.217,10.124.6.113,10.124.5.103,10.124.3.74,10.124.5.47,10.5.236.18,10.124.4.242,10.124.3.241,10.5.233.165,10.4.228.112,10.124.4.197,10.124.2.161,10.124.2.120,10.4.228.212,10.124.2.199,10.124.1.86,10.2.30.116,10.124.6.195,10.2.30.199,10.124.6.134,10.2.30.104,10.2.10.92,10.124.1.195,10.2.31.52,10.124.5.85,10.124.1.193,10.124.5.181,10.124.1.13,10.4.245.45,10.124.5.60,10.124.4.122,10.124.3.65,10.4.246.140,10.2.31.82,10.4.229.28,10.2.31.42,10.124.4.102,10.124.4.236,10.124.5.42,10.5.236.194,10.4.237.237,10.124.4.60,10.124.4.4,10.124.2.5,10.124.1.10,10.124.4.19,10.2.32.124,10.124.2.101,10.124.2.198,10.4.240.105,10.4.233.148,10.124.5.138,10.124.1.15,10.4.241.162,10.5.234.185,10.5.235.234,10.124.3.157,192.168.226.187,10.2.31.51,10.124.4.230,10.4.243.85,10.5.233.61,10.124.1.222,10.124.3.154,10.124.4.186,10.124.4.22,10.124.4.17,10.2.28.227,10.124.1.145,10.124.2.209,10.124.6.138,10.124.5.36,10.5.234.102,10.124.1.211,10.4.242.102,10.4.235.194,10.4.238.168,10.4.238.194,10.124.2.189,10.4.233.157,10.124.2.126,10.4.240.121,10.4.228.11,10.124.4.145,10.124.6.142,10.4.245.15,10.124.1.178,10.124.5.45,10.124.2.170,10.124.4.43,10.124.5.37,10.124.3.111,10.124.5.211,10.124.4.57,10.124.2.223,10.124.1.73,10.4.228.12,10.5.232.16,10.5.236.56,10.124.4.199,10.5.235.41,10.4.231.241,10.124.2.135,10.124.4.146,10.69.81.220,10.124.4.175,10.124.1.127,10.4.244.143,10.124.3.224,10.4.242.183,10.4.234.156,10.124.4.77,10.5.234.131,10.124.3.88,10.124.5.3,10.4.233.116,10.2.31.87,10.124.1.76,10.124.4.83,10.4.230.109,10.4.231.88,10.124.5.134,10.124.2.147,10.4.240.95,10.124.4.34,10.124.5.87,10.124.1.150,10.4.238.226,10.2.32.46,10.124.3.57,10.124.4.113,10.2.30.152,10.8.0.1,10.124.5.205,10.4.236.86,10.124.1.247,10.124.3.34,10.124.2.210,10.4.228.49,10.4.229.239,10.124.1.88,10.124.2.242,10.124.1.45,10.4.233.171,10.4.233.2,10.4.238.239,10.124.1.14,10.2.28.182,10.124.2.74,10.69.81.224,10.124.5.210,10.124.5.245,10.124.4.250,10.4.237.192,10.124.5.250,10.2.31.77,10.2.31.85,10.124.5.99,10.124.1.17,10.4.233.37,10.2.31.72,10.5.235.21,10.124.1.200,10.4.239.247,10.2.31.36,10.124.2.19,10.124.3.237,10.124.3.87,10.124.5.16,10.124.1.202,10.124.2.222,10.5.233.246,10.4.244.17,10.124.4.93,10.2.31.32,10.2.31.16,10.4.231.193,10.4.241.127,10.4.239.220,10.124.4.99,10.124.1.225,10.2.27.146,10.2.31.71,10.124.3.124,10.4.236.238,10.4.230.78,10.124.4.234,10.124.6.167,10.124.2.149,10.124.4.46,10.124.1.93,10.124.5.18,10.2.31.28,10.2.31.58,10.124.2.4,10.124.6.232,10.124.2.236,10.4.239.29,10.2.30.157,10.2.31.26,10.124.3.35,10.4.241.227,10.124.5.9,10.2.31.23,10.2.27.147,10.124.2.245,10.2.31.59,10.124.5.177,10.4.230.144,10.4.237.128,10.124.4.163,10.124.4.203,10.4.237.44,10.124.2.202,10.4.233.138,10.124.1.103,10.4.233.71,10.4.234.207,10.5.235.91,10.2.31.74,10.4.235.190,10.2.31.48,10.124.4.157,10.124.2.83,10.124.3.212,10.124.3.165,10.4.239.21,10.4.236.194,10.124.5.148,10.124.4.127,10.124.2.98,10.124.3.131,10.4.236.134,10.69.81.227,10.5.237.227,10.4.228.248,10.2.28.229,10.124.5.31,10.124.2.124,10.4.241.235,10.124.3.170,10.124.2.72,10.4.231.113,10.4.237.227,10.124.2.190,10.4.235.24,10.4.236.140,10.4.239.237,10.124.5.29,10.20.60.44,10.4.243.9,10.4.234.33,10.124.5.130,10.4.239.189,10.124.1.12,10.124.1.37,10.124.5.111,10.124.6.33,10.4.243.76,10.5.233.249,172.27.7.252,172.27.7.210,10.124.5.176,10.2.31.25,10.124.4.136,172.27.6.233,10.4.237.60,10.5.236.136,172.27.6.225,10.124.3.245,10.124.5.241,10.4.239.201,10.124.4.33,10.4.230.163,10.124.4.121,10.124.2.146,10.124.1.18,10.124.6.40,10.124.5.242,10.124.4.47,10.124.1.189,10.5.236.115,10.124.6.234,10.4.241.98,172.27.8.252,10.124.5.140,10.4.237.66,10.124.5.222,10.124.4.37,10.124.2.51,10.4.240.79,10.4.239.3,10.124.2.154,10.5.233.244,10.5.235.19,10.124.4.147,10.124.5.202,10.5.236.100,10.2.32.131,172.27.1.8,10.124.4.7,10.124.5.161,10.124.4.207,10.124.1.216,10.124.3.32,10.124.2.78,10.20.61.7,10.124.4.126,10.4.246.182,10.5.245.101,10.2.31.39,10.124.2.38,10.4.235.199,10.2.31.22,172.27.5.235,10.5.234.148,10.124.5.21,10.5.232.9,10.124.6.112,10.124.2.197,10.124.2.55,172.27.8.232,10.5.234.77,10.4.239.138,10.124.1.78,172.27.8.253,10.2.31.54,10.2.31.62,10.2.32.26,10.124.2.80,10.4.246.180,10.124.4.226,172.27.6.221,10.4.228.166,10.124.6.60,10.124.1.174,10.124.3.22,10.124.2.195,10.124.6.120,10.4.233.96,172.27.5.229,10.2.31.37,10.124.2.140,10.124.2.206,10.124.4.132,172.27.7.213,10.124.1.254,10.124.2.217,10.124.5.152,10.4.241.171,10.124.4.23,172.27.5.209,10.124.6.25,10.69.81.240,10.124.1.169,10.124.3.70,172.27.7.211,10.4.242.100,172.27.7.242,10.124.1.102,10.124.4.8,10.124.3.54,10.124.4.30,10.4.241.62,10.124.3.95,10.2.31.88,10.2.29.16,10.124.4.150,172.27.5.231,10.124.3.231,10.2.30.44,10.124.5.123,10.4.243.4,10.5.236.206,10.124.5.219,10.4.234.109,10.124.1.217,10.124.1.23,10.4.235.103,172.27.5.241,10.124.4.220,10.124.6.6,10.2.31.68,10.124.4.159,10.124.6.16,10.4.231.41,10.4.242.172,10.124.6.83,10.124.2.240,10.4.232.108,10.2.32.44,10.124.5.189,10.124.3.155,172.27.1.9,10.124.6.109,10.5.235.153,10.124.3.132,172.27.6.219,172.27.7.216,10.124.5.106,10.124.1.241,10.5.234.2,10.124.2.218,10.2.31.49,172.27.3.251,10.69.81.241,10.2.30.107,172.27.5.216,10.2.31.73,10.124.4.240,10.2.31.31,10.4.254.41,10.4.231.156,10.2.31.29,10.124.4.72,10.4.235.38,10.124.5.153,10.4.232.186,10.5.232.249,172.27.7.224,10.124.1.16,10.5.235.157,10.2.31.78,10.124.5.93,10.2.31.63,10.124.6.3,10.5.237.209,10.4.246.147,10.124.6.17,10.124.6.93,10.124.4.13,10.2.31.65,172.27.5.237,172.27.5.249,10.124.1.155,10.124.4.5,10.124.1.148,172.27.8.221,10.124.6.30,10.4.234.24,10.124.4.59,10.124.2.28,10.4.234.66,10.124.2.131,10.124.3.196,172.27.5.232,172.27.8.244,10.124.2.163,10.2.28.196,10.124.5.170,10.124.2.113,10.5.234.85,10.4.234.63,10.124.1.97,172.27.7.243,10.124.5.65,172.27.7.219,10.124.3.213,10.124.5.53,10.4.245.48,10.124.4.36,172.27.7.254,10.5.235.151,10.2.31.57,10.2.28.120,10.2.30.118,10.124.3.125,10.4.229.60,10.4.240.34,10.124.4.195,10.124.6.151,172.27.8.222,10.124.3.130,10.4.243.149,172.27.6.253,10.124.2.138,10.124.1.99,10.2.30.132,10.5.237.111,10.124.5.196,10.124.1.33,10.124.1.48,172.27.6.248,10.4.241.163,172.27.7.248,172.27.7.227,10.2.9.48,10.124.5.104,10.69.81.216,10.124.2.11,10.4.235.90,172.27.1.31,10.2.30.102,10.124.5.208,10.124.5.41,10.124.5.68,10.124.2.159,10.4.239.226,10.124.5.159,10.124.5.243,10.4.234.206,10.4.233.66,10.124.3.134,10.124.2.208,172.27.6.232,10.4.231.98,10.2.31.75,10.124.4.202,10.124.3.151,10.4.234.159,10.4.243.20,10.124.5.164,10.4.237.216,10.124.2.214,10.124.6.76,172.27.8.225,10.124.4.71,10.124.2.115,10.2.31.38,10.4.229.223,10.124.5.15,10.124.4.254,10.4.244.52,172.27.8.214,10.124.4.115,10.4.239.91,10.2.23.93,10.2.31.24,10.124.2.81,10.4.243.60,172.27.5.227,172.27.5.233,10.4.233.223,10.124.3.208,10.124.6.118,10.124.6.251,10.124.2.102,10.124.5.247,10.124.4.192,10.124.5.237,10.124.3.122,10.124.6.155,172.27.7.223,172.27.5.234,10.4.239.185,10.124.6.162,10.4.233.172,10.124.3.24,10.124.4.11,172.27.7.253,172.27.5.222,10.124.3.66,10.4.234.151,10.2.32.22,10.124.2.193,10.124.6.181,10.124.6.233,10.5.235.252,10.124.4.9,10.124.1.144,10.124.5.168,10.124.4.188,10.124.1.83,10.124.3.78,10.124.3.133,10.2.9.177,10.2.31.89,10.124.5.240,172.27.7.207,10.4.245.203,10.2.9.45,10.66.11.71,10.124.6.32,10.124.5.50,10.124.5.157,10.4.246.111,10.124.6.219,10.124.1.213,10.69.81.239,10.4.244.4,10.124.5.209,10.4.232.241,10.4.235.250,10.2.9.125,172.27.8.233,10.5.245.37,10.124.3.214,10.124.1.233,10.124.6.4,10.5.237.130,10.124.4.238,172.27.8.228,10.124.5.115,10.4.229.35,10.124.4.151,172.27.1.32,10.5.234.21,10.124.4.54,10.124.4.174,172.27.6.244,172.27.7.233,10.124.2.12,172.27.7.209,10.124.2.60,10.124.4.55,10.124.4.62,10.2.30.112,10.4.233.153,10.4.228.20,10.124.5.46,10.2.31.27,10.124.5.137,10.4.232.49,10.2.31.35,10.4.232.132,10.5.236.96,10.4.236.139,10.2.30.113,10.124.4.98,10.124.1.36,172.27.7.212,10.124.5.56,10.124.4.63,10.124.2.211,10.2.30.119,10.124.3.86,10.69.81.236,10.124.3.120,10.124.5.246,10.124.1.98,10.124.5.204,10.2.29.68,10.124.5.110,10.124.1.128,10.124.3.209,10.124.6.236,172.27.5.244,10.4.242.194,10.124.5.48,10.124.5.172,10.124.4.213,10.2.31.41,10.2.31.79,10.124.6.27,10.2.29.220,10.2.9.42,10.4.245.103,10.4.234.250,10.124.4.90,10.124.6.141,10.2.28.184,10.2.31.61,10.124.3.183,10.4.239.144,10.4.234.3,10.124.6.179,10.124.2.117,10.5.245.96,10.124.1.29,10.124.2.40,10.4.240.120,10.124.2.235,10.124.1.234,10.4.238.5,172.27.6.220,10.4.243.24,10.4.237.23,10.4.234.152,10.4.228.180,10.2.32.213,10.124.5.80,172.27.6.229,10.124.4.53,10.124.2.184,10.2.31.56,172.27.5.252,172.27.5.236,10.124.3.50,10.124.3.3,10.124.6.26,10.124.4.235,172.26.2.65,10.124.3.238,10.124.2.77,10.124.5.233,10.124.2.171,10.124.1.175,10.4.245.210,10.124.3.100,10.4.230.196,10.124.3.207,10.124.2.82,10.124.4.131,172.27.1.10,10.124.2.247,10.5.234.125,10.124.4.118,10.124.5.238,172.27.7.228,10.4.239.146,10.4.235.249,10.124.5.146,10.124.4.206,172.27.5.219,10.124.2.104,10.124.5.122,10.124.2.177,10.2.28.228,10.5.234.190,10.124.5.193,10.2.31.81,10.124.2.76,10.124.1.91,172.27.8.236,10.4.237.97,172.27.6.250,10.124.4.176,10.124.4.237,10.4.245.126,10.2.31.64,10.124.5.188,10.4.231.67,10.2.31.83,10.4.235.150,10.2.31.43,10.124.5.40,10.124.5.4,10.4.236.10,10.124.2.158,10.66.11.90,10.124.1.172,172.27.5.207,172.27.8.249,10.4.235.6,10.124.1.28,10.124.5.57,10.124.1.105,172.27.8.229,10.124.5.151,10.124.5.105,10.124.1.79,172.27.5.220,10.4.246.221,10.124.5.131,10.124.4.97,10.124.4.125,10.124.5.13,10.124.2.175,10.4.238.184,10.124.2.99,10.2.9.141,10.5.234.16,10.124.5.90,10.4.241.233,10.2.31.86,10.4.244.170,10.124.5.94,172.27.6.242,10.5.234.134,172.27.1.29,10.2.9.46,10.2.27.154,172.27.5.230,172.27.6.247,10.4.243.144,172.27.3.254,10.4.246.184,10.124.4.214,10.2.9.64,10.124.4.205,10.124.4.28,10.2.30.105,10.4.230.154,10.124.5.43,10.124.6.35,10.5.232.135,172.27.1.25,172.27.6.234,10.124.3.149,10.2.27.187,10.124.5.235,172.27.6.243,10.124.5.213,10.124.3.103,10.124.5.215,172.27.6.235,10.4.235.122,10.124.5.179,10.4.232.78,172.27.1.33,10.124.4.35,10.5.235.118,10.5.234.100,172.27.8.227,10.2.31.34,10.5.233.139,10.124.3.247,172.27.8.215,10.124.2.119,10.5.235.28",
      "stage" -> "127.0.0.3,10.5.239.150,10.4.250.39,172.27.5.225"
    )
    val appkey = "com.sankuai.inf.sg_agent"
    evns.foreach {
      evn =>
        val ips = ip_map.getOrElse(evn, "")
        ips.split(",").foreach {
          ip =>
            var providerPath = Seq(sankuaiPath, evn, appkey, Path.provider).mkString("/")
            val nodePath = s"$providerPath/$ip:5266"
            if (ZkClient.exist(nodePath)) {
              val data = ZkClient.getData(nodePath)
              val pnode = Json.parse(data).validate[ProviderNode].get
              val pedit = ProviderEdit(appkey = pnode.appkey, ip = pnode.ip, port = pnode.port, env = pnode.env,
                weight = Some(pnode.weight), fweight = pnode.fweight, status = Some(pnode.status),
                enabled = pnode.enabled, role = Some(pnode.role), extend = Some(pnode.extend))
              AppkeyProviderService.delProviderByType("com.sankuai.inf.sg_agent", 1, pedit)
            }
        }
    }
  }

  test("doShutdownIps2") {
    val misip = usernameIPs("hanjiancheng", List("127.0.0.4", "127.0.0.4","10.20.60.147","10.20.60.148"))
    ServiceCommon.doShutdownIps(misip)
    Thread.sleep(1000000)
  }


  test("doShutdownIps") {
    val misip = usernameIPs("hanjiancheng", List("10.20.62.20"))
    ServiceCommon.doShutdownIps(misip)
    Thread.sleep(1000000)
  }

  test("reg"){
    val reg = "{\"username\":\"tangye03\",\"data\":{\"appkey\":\"com.sankuai.inf.octo.profiler\",\"owners\":[\"tangye03\"],\"observers\":[],\"base\":1,\"owt\":\"inf\",\"pdl\":\"octo\",\"tags\":\"\",\"intro\":\"profiler服务\"}}"
    val data = HttpUtil.httpPostRequest("http://localhost:8080/api/service/registry",reg)
    println(data)
  }
  test("bindUser"){
    println(UserService.bindUser("llin.zhao"))
  }

  test("testforJson"){
//    val data = "<html><title>500 Internal error</title></html>"
    val _data = "{\"name\":\"网站\",\"num\":3,\"sites\":[ \"Google\", \"Runoob\", \"Taobao\" ]}"
    val data = "{\"data\":{\"name\":\"\",\"appkey\":\"com.sa\nnkuai.waimai.m.databooster\",\"baseApp\":\"com.sankuai.waimai.m.databooster\",\"owners\":[{\"id\":44297,\"login\":\"wangjing25\",\"name\":\"王静\"},{\"id\":2038584,\"login\":\"jianghe\",\"name\":\"姜贺\"},\n{\"id\":60526,\"login\":\"zhangning13\",\"name\":\"张宁\"},{\"id\":1075872,\"login\":\"lubin.shi\",\"name\":\"史录斌\"},{\"id\":2122445,\"login\":\"liangqi02\",\"name\":\"梁琦\"},{\"id\":99160,\"login\":\"wangxin4\n4\",\"name\":\"王馨\"},{\"id\":54379,\"login\":\"lixiaotong\",\"name\":\"李晓桐\"},{\"id\":85427,\"login\":\"weiyuhao\",\"name\":\"魏宇浩\"},{\"id\":2111278,\"login\":\"chaihuijian\",\"name\":\"柴会见\"},{\"id\":520\n74,\"login\":\"quwenqian\",\"name\":\"曲文乾\"},{\"id\":2151284,\"login\":\"xufeng08\",\"name\":\"徐锋\"},{\"id\":2114201,\"login\":\"guoyingbo\",\"name\":\"郭迎波\"},{\"id\":2099491,\"login\":\"wangpeng70\",\"nam\ne\":\"王鹏\"},{\"id\":2052137,\"login\":\"digger\",\"name\":\"digger(digger)\"}],\"observers\":[],\"intro\":\"\",\"category\":\"\",\"business\":0,\"group\":\"\",\"base\":0,\"owt\":\"waimai\",\"pdl\":\"m\",\"level\":0,\"t\nags\":\"\",\"regLimit\":0,\"createTime\":1515069631},\"isSuccess\":true}"
    val o = new ObjectMapper()
    try{
      o.readTree(data)
      println(true)
    }catch {
      case e: Exception =>
        println(false)
    }
  }

}
