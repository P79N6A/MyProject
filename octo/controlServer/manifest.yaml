version: v0.1
build:
  os: centos6-cpp
  env:
    app_version: v0.1.2
  tools:
    Percona-SQL-devel-50:
    mysql++:
    cthrift:
    boost:
    boost-devel:
    muduo:
    uuid-devel:
    libuuid-devel:
    libcurl-devel:
  run:
    workDir: ./controlServer
    cmd:
    - cmake ./
    - make
    - cp -rf script/run bin/
  target:
    distDir: controlServer/bin/
    files:
    - cplugin_control_server
    - run.sh
deploy:
  targetDir: /opt/meituan/apps/cplugin_server
  run:
    workDir: ./
    cmd:
    - ln -snf /opt/meituan/apps/cplugin_server /service/cplugin_server
    - sudo svc -d /service/cplugin_server
autodeploy:
    targetDir : /opt/meituan/apps/cplugin_server/
    run:   sh run.sh
